<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KEPCO ì»¤ë®¤ë‹ˆí‹°</title>
    <link rel="stylesheet" href="/css/index.css">
</head>
<body>
    <header>
        <h1><a href="/">KEPCO Digital Bootcamp 3ê¸° ì»¤ë®¤ë‹ˆí‹°</a></h1>
        <div class="header-buttons" th:if="${session.id} != null">
            <a href="/member/logout">ë¡œê·¸ì•„ì›ƒ</a>
            <a href="" onclick="openPopup('/member/change')">ì •ë³´ë³€ê²½</a>
            <div th:if="${session.grade} == 99">
                <a href="/admin/list">íšŒì›ê´€ë¦¬</a>
            </div>
            <!-- <span th:switch="${session.grade}">
                <span th:case="0"><img src="/image/0_iron.png" alt="ì•„ì´ì–¸"></span>
                <span th:case="1"><img src="/image/1_bronze.png" alt="ë¸Œë¡ ì¦ˆ"></span>
                <span th:case="2"><img src="/image/2_silver.png" alt="ì‹¤ë²„"></span>
                <span th:case="3"><img src="/image/3_gold.png" alt="ê³¨ë“œ"></span>
                <span th:case="4"><img src="/image/4_platinum.png" alt="í”Œë ˆí‹°ë„˜"></span>
                <span th:case="5"><img src="/image/5_emerald.png" alt="ì—ë©”ë„ë“œ"></span>
                <span th:case="6"><img src="/image/6_diamond.png" alt="ë‹¤ì´ì•„ëª¬ë“œ"></span>
                <span th:case="7"><img src="/image/7_master.png" alt="ë§ˆìŠ¤í„°"></span>
                <span th:case="8"><img src="/image/8_grandmaster.png" alt="ê·¸ëœë“œë§ˆìŠ¤í„°"></span>
                <span th:case="9"><img src="/image/9_challenger.png" alt="ì±Œë¦°ì €"></span>
                <span th:case="10"><img src="/image/cat1.png" alt="ìœ ë¯¸"></span>
                <span th:case="11">
                    <a href="#" onclick="openProfileUploadPopup()">
                        <img src="/image/cat2.png" alt="ê¼¬ë´‰">
                    </a>
                </span>
                <span th:case="12"><img src="/image/cat3.png" alt="ë ê°€"></span>
                <span th:case="13"><img src="/image/sora.png" alt="ë¸”ë£¹í”¼ì‰¬"></span>
                <span th:case="14"><img src="/image/monkey.png" alt="ì½”ì£¼ë¶€ì›ìˆ­ì´"></span>
                <span th:case="15"><img src="/image/yuumi2.png" alt="í•˜ì‡~"></span>
                <span th:case="99">
                    <a href="#" onclick="openProfileUploadPopup()">
                        <img src="/image/yuumi.png" alt="ê´€ë¦¬ì">
                    </a>
                </span>
            </span> -->
            <td>
                <a th:if="${not #lists.isEmpty(imageSet)}" href="#" onclick="openProfileUploadPopup()">
                    <img th:src="@{'/images/' + ${imageSet[0].imgName}}" alt="í”„ë¡œí•„ ì‚¬ì§„" class="profile-image">
                </a>
                <a th:if="${#lists.isEmpty(imageSet)}" href="#" onclick="openProfileUploadPopup()">
                    <img src="/images/default.png" alt="ê¸°ë³¸ í”„ë¡œí•„ ì‚¬ì§„" class="profile-image">
                </a>
            </td>
            <p>[[${session.name}]]ë‹˜ ì•ˆë…•í•˜ì„¸ìš”.</p>
        </div>
        <div class="header-buttons" th:if="${session.id} == null">
            <a href="/member/login">ë¡œê·¸ì¸</a>
            <a href="/member/register">íšŒì›ê°€ì…</a>
        </div>
    </header>
    <main>
        <section>
            <div class="header-buttons">
                <button onclick="location.href='/board/insert'">ê¸€ì“°ê¸°</button>
            </div>
            <h2>ììœ ê²Œì‹œíŒ</h2>
            <table>
                <thead>
                    <tr>
                        <th>ê¸€ë²ˆí˜¸</th>
                        <th>ë¶„ë¥˜</th>
                        <th>ì œëª©</th>
                        <th>ì‘ì„±ì</th>
                        <th>í”„ë¡œí•„</th>
                        <th>ì¡°íšŒìˆ˜</th>
                        <th>ëŒ“ê¸€ìˆ˜</th>
                        <th>ë‚ ì§œ</th>
                        <th>ğŸ‘</th>
                        <th>ğŸ‘</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="result : ${resultSet}">
                        <td th:text="${result.seq}"></td>
                        <td th:text="${result.subject}"></td>
                        <td>
                            <a th:href="@{/board/detail(seq=${result.seq})}" th:text="${result.title}"></a>
                        </td>
                        <td th:text="${result.name}"></td>
                        <td>
                            <!-- ì´ë¯¸ì§€ ë°ì´í„°ê°€ ìˆëŠ” ê²½ìš° -->
                            <img th:if="${result.imgName != null}" th:src="@{'/images/' + ${result.imgName}}" alt="í”„ë¡œí•„ ì‚¬ì§„" class="profile-image">
                            <!-- ì´ë¯¸ì§€ ë°ì´í„°ê°€ ì—†ëŠ” ê²½ìš° -->
                            <img th:unless="${result.imgName != null}" src="/images/default.png" alt="ê¸°ë³¸ í”„ë¡œí•„ ì‚¬ì§„" class="profile-image">
                        </td>
                        <td th:text="${result.search_cnt}"></td>
                        <td th:text="${result.comment_count}"></td>
                        <td th:text="${result.reg_dt}"></td>
                        <td th:text="${result.like_cnt}"></td>
                        <td th:text="${result.dlike_cnt}"></td>
                    </tr>
                </tbody>
            </table>
            <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
            <div>
                <ul>
                    <li th:if="${currentPage > 1}">
                        <a th:href="@{'/?pageNum=' + (${currentPage} - 1)}">&lt; ì´ì „</a>
                    </li>
                    
                    <li th:each="pageIdx : ${#numbers.sequence(1, totalPages)}">
                        <span th:if="${pageIdx == currentPage}" th:text="${pageIdx}"></span>
                        <a th:if="${pageIdx != currentPage}" th:href="@{'/?pageNum=' + ${pageIdx}}" th:text="${pageIdx}"></a>
                    </li>
                    
                    <li th:if="${currentPage < totalPages}">
                        <a th:href="@{'/?pageNum=' + (${currentPage} + 1)}">ë‹¤ìŒ &gt;</a>
                    </li>
                </ul>
            </div>
        </section>
    </main>
    <footer>
        <p>&copy; 2024 ì•ˆì‹œí˜•. All rights reserved.</p>
    </footer>
    <script>
        function openPopup(url) {
            window.open(url, '_blank', 'width=600,height=800');
            return false; // Prevent default link action
        }

        function openProfileUploadPopup() {
            window.open('/profile/upload', 'Profile Upload', 'width=800,height=600');
        }
    </script>
</body>
</html>
